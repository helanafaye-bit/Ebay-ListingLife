<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ebay Listings</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>Ebay Listings</h1>
            <div class="search-container">
                <input type="text" id="searchBar" placeholder="Search items... (e.g., 'Glass plate')">
                <button id="searchBtn">Search</button>
            </div>
        </header>

        <div class="main-layout">
            <main class="main-content">
                <div class="add-section">
                    <button id="addCategoryBtn" class="btn btn-primary">Add New Category</button>
                    <button id="addItemBtn" class="btn btn-secondary">Add New Item</button>
                    <button id="itemsEndedBtn" class="btn btn-danger">Items Ended</button>
                </div>

                <div id="categoriesContainer">
                    <!-- Categories will be dynamically added here -->
                </div>

                <div id="categoryItemsContainer" style="display: none;">
                    <div class="category-items-header">
                        <button id="backToCategories" class="btn btn-secondary">‚Üê Back to Categories</button>
                        <div class="category-title-section">
                            <h2 id="currentCategoryTitle"></h2>
                            <div class="sort-dropdown">
                                <select id="categorySortSelect">
                                    <option value="newest">Newest First</option>
                                    <option value="oldest">Oldest First</option>
                                    <option value="lowest-days">Lowest Days Left</option>
                                    <option value="highest-days">Highest Days Left</option>
                                </select>
                            </div>
                        </div>
                        <div id="categoryDurationInfo"></div>
                    </div>
                    <div id="categoryItemsList">
                        <!-- Items for selected category will be shown here -->
                    </div>
                </div>

                <div id="endedItemsContainer" style="display: none;">
                    <div class="category-items-header">
                        <button id="backToCategoriesFromEnded" class="btn btn-secondary">‚Üê Back to Categories</button>
                        <div class="category-title-section">
                            <h2>Items Ended (0 Days Left)</h2>
                        </div>
                    </div>
                    <div id="endedItemsList">
                        <!-- Ended items will be shown here -->
                    </div>
                </div>
            </main>

            <aside class="sidebar">
                <div class="sidebar-section">
                    <div class="sidebar-header">
                        <h3 id="sidebarTitle">Recently Added Items</h3>
                        <div class="sidebar-toggle">
                            <button id="recentToggle" class="toggle-btn active">Recent</button>
                            <button id="endingToggle" class="toggle-btn">Ending Soon</button>
                        </div>
                    </div>
                    <div id="urgentItemsList">
                        <!-- Items will be shown here based on toggle selection -->
                    </div>
                </div>
            </aside>
        </div>

        <!-- Modal for adding/editing categories -->
        <div id="categoryModal" class="modal">
            <div class="modal-content">
                <span class="close">&times;</span>
                <h2 id="categoryModalTitle">Add New Category</h2>
                <form id="categoryForm">
                    <label for="categoryName">Title</label>
                    <input type="text" id="categoryName" placeholder="Category name (e.g., Fragile Items)" required>
                    <label for="categoryDescription">Description</label>
                    <textarea id="categoryDescription" placeholder="Describe this category..." rows="2"></textarea>
                    <button type="submit" class="btn btn-primary">Save Category</button>
                </form>
            </div>
        </div>

        <!-- Modal for adding/editing items -->
        <div id="itemModal" class="modal">
            <div class="modal-content">
                <span class="close">&times;</span>
                <h2 id="itemModalTitle">Add New Item</h2>
                <form id="itemForm">
                    <label for="itemCategory">Select Category</label>
                    <select id="itemCategory" required>
                        <option value="">Select Category</option>
                    </select>
                    
                    <label for="itemName">Item Name</label>
                    <input type="text" id="itemName" placeholder="Item name (e.g., Big Glass thing)" required>
                    
                    <label for="itemDescription">Description of the item</label>
                    <textarea id="itemDescription" placeholder="Enter detailed description of the item..." rows="3"></textarea>
                    
                    <label for="itemNote">Note for the item</label>
                    <textarea id="itemNote" placeholder="Add any additional notes about this item..." rows="2"></textarea>
                    
                    <label for="itemDateAdded">Date added of the item</label>
                    <input type="date" id="itemDateAdded" required>
                    
                    <label for="itemEndDate">End date</label>
                    <input type="date" id="itemEndDate" required>
                    
                    <label for="itemPhoto">A photo of the item</label>
                    <div class="picture-upload-section">
                        <input type="file" id="itemPhotoFile" accept="image/*" onchange="app.handleFileUpload(event)">
                        <div class="upload-or">OR</div>
                        <input type="url" id="itemPhoto" placeholder="https://example.com/image.jpg">
                    </div>
                    
                    <div id="itemPhotoPreview" class="picture-preview" style="display: none;">
                        <img id="previewImageNew" src="" alt="Item preview">
                    </div>
                    
                    <button type="submit" class="btn btn-primary">Save Item</button>
                </form>
            </div>
        </div>

        <!-- Modal for item details (notes/pictures) -->
        <div id="itemDetailModal" class="modal">
            <div class="modal-content">
                <span class="close">&times;</span>
                <h2 id="itemDetailModalTitle">Item Details</h2>
                <form id="itemDetailForm">
                    <label for="itemDetailName">Item Name</label>
                    <input type="text" id="itemDetailName" readonly>
                    
                    <label for="itemDetailCategory">Category</label>
                    <input type="text" id="itemDetailCategory" readonly>
                    
                    <label for="itemDetailDescription">Description</label>
                    <textarea id="itemDetailDescription" readonly rows="3"></textarea>
                    
                    <label for="itemDetailNote">Note</label>
                    <textarea id="itemDetailNote" placeholder="Add notes about this item..." rows="2"></textarea>
                    
                    <label for="itemDetailDateAdded">Date Added</label>
                    <input type="text" id="itemDetailDateAdded" readonly>
                    
                    <label for="itemDetailPicture">Picture</label>
                    <div class="picture-upload-section">
                        <input type="file" id="itemDetailPictureFile" accept="image/*" onchange="app.handleFileUpload(event)">
                        <div class="upload-or">OR</div>
                        <input type="url" id="itemDetailPicture" placeholder="https://example.com/image.jpg">
                    </div>
                    
                    <div id="itemPicturePreview" class="picture-preview" style="display: none;">
                        <img id="previewImage" src="" alt="Item preview">
                    </div>
                    
                    <div class="modal-actions">
                        <button type="button" class="btn btn-secondary" onclick="app.closeModals()">Cancel</button>
                        <button type="submit" class="btn btn-primary">Save Changes</button>
                    </div>
                </form>
            </div>
        </div>

        <!-- Simple View Modal for displaying item information -->
        <div id="viewModal" class="modal">
            <div class="modal-content view-modal-content">
                <span class="close">&times;</span>
                <h2 id="viewModalTitle">Item Details</h2>
                <div class="view-content">
                    <div class="view-photo-section">
                        <img id="viewImage" src="" alt="Item photo" style="display: none;">
                        <div id="viewNoPhoto" class="no-photo-placeholder" style="display: none;">
                            <span>üì∑</span>
                            <p>No photo available</p>
                        </div>
                    </div>
                    <div class="view-info-section">
                        <div class="view-field">
                            <label>Item Name:</label>
                            <span id="viewName"></span>
                        </div>
                        <div class="view-field">
                            <label>Category:</label>
                            <span id="viewCategory"></span>
                        </div>
                        <div class="view-field">
                            <label>Description:</label>
                            <div id="viewDescription" class="view-text"></div>
                        </div>
                        <div class="view-field">
                            <label>Notes:</label>
                            <div id="viewNote" class="view-text"></div>
                        </div>
                        <div class="view-field">
                            <label>Date Added:</label>
                            <span id="viewDateAdded"></span>
                        </div>
                    </div>
                </div>
                <div class="modal-actions">
                    <button type="button" class="btn btn-secondary" onclick="closeViewModal()">Close</button>
                </div>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>
